/**
 * @license
 * Copyright 2010-2022 index.js Authors
 * SPDX-License-Identifier: MIT
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).THREE=t()}(this,(function(){"use strict";class e{constructor(e,t){this.array=e,this.options=t}get size(){return this.array[0].length}arrayBuffer(){return this.array[0]}}function t(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,n,s,i,a="",o=0;const c=(e=String(e)).length%3;for(;o<e.length;){if((n=e.charCodeAt(o++))>255||(s=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");r=n<<16|s<<8|i,a+=t.charAt(r>>18&63)+t.charAt(r>>12&63)+t.charAt(r>>6&63)+t.charAt(63&r)}return c?a.slice(0,c-3)+"===".substring(c):a}class r{static arrayBufferToBase64(e){let r="";const n=new Uint8Array(e),s=n.byteLength;for(let e=0;e<s;e++)r+=String.fromCharCode(n[e]);return t(r)}static base64ToArrayBuffer(e,t){const r=e.replace(/[^A-Za-z0-9\+\/]/g,""),n=r.length,s=t?Math.ceil((3*n+1>>>2)/t)*t:3*n+1>>>2,i=new Int8Array(s);for(var a,o,c=0,l=0,u=0;u<n;u++)if(o=3&u,c|=((h=r.charCodeAt(u))>64&&h<91?h-65:h>96&&h<123?h-71:h>47&&h<58?h+4:43===h?62:47===h?63:0)<<18-6*o,3===o||n-u==1){for(a=0;a<3&&l<s;a++,l++)i[l]=c>>>(16>>>a&24)&255;c=0}var h;return i.buffer}}class n{static get current(){const e=this.getCurrentPages();return e[e.length-1]}static getCurrentPages(){return"undefined"==typeof requireMiniProgram?getCurrentPages():requireMiniProgram().getCurrentPages()}static getApp(){return"undefined"==typeof requireMiniProgram?getApp().globalData:requireMiniProgram().getApp().globalData}static get wx_request(){return"undefined"==typeof requireMiniProgram?wx.request:requireMiniProgram().wx_request()}}class s{constructor(e){this.styles={},this.value=""}set cssText(e){this._cssText=e}get cssText(){return this._cssText}setProperty(){}run(e,t){}set display(e){this.run("display",e)}set pointerEvents(e){this.run("pointerEvents",e)}set margin(e){this.run("margin",e)}set marginBottom(e){this.run("marginBottom",e)}set marginTop(e){this.run("marginTop",e)}set marginLeft(e){this.run("marginLeft",e)}set marginRight(e){this.run("marginRight",e)}set padding(e){this.run("padding",e)}set paddingBottom(e){this.run("paddingBottom",e)}set paddingTop(e){this.run("paddingTop",e)}set paddingLeft(e){this.run("paddingLeft",e)}set paddingRight(e){this.run("paddingRight",e)}set position(e){this.run("position",e)}set backfaceVisibility(e){this.run("backfaceVisibility",e)}set transformStyle(e){this.run("transformStyle",e)}set fontFamily(e){this.run("fontFamily",e)}set fontSize(e){this.run("fontSize",e)}set fontStyle(e){this.run("fontStyle",e)}set fontWeight(e){this.run("fontWeight",e)}set letterSpacing(e){this.run("letterSpacing",e)}set color(e){this.run("color",e)}set background(e){this.run("background",e)}set backgroundColor(e){this.run("backgroundColor",e)}set touchAction(e){this.run("touchAction",e)}set visibility(e){this.run("visibility",e)}set zoom(e){this.run("zoom",e)}set userSelect(e){this.run("userSelect",e)}set overflow(e){this.run("overflow",e)}set width(e){this.run("width",e)}set height(e){this.run("height",e)}set left(e){this.run("left",e)}set right(e){this.run("right",e)}set top(e){this.run("top",e)}set bottom(e){this.run("bottom",e)}set opacity(e){this.run("opacity",e)}set transform(e){this.run("transform",e)}set transformOrigin(e){this.run("transformOrigin",e)}}var i={remove(e,t){const r=e.indexOf(t);return r>-1&&e.splice(r,1),e}},a=wx.getSystemInfoSync(),o=a.platform,c=a.pixelRatio;class l{static fix(e){var t=new l(e.type);t.isTrusted=!0,t.altKey=!1,t.altitudeAngle=1.5707963267948966,t.azimuthAngle=0,t.bubbles=!0,t.button=["touchstart","touchend"].includes(e.type)?0:-1,t.buttons=["touchstart","touchend"].includes(e.type)?0:1,t.cancelBubble=!1,t.cancelable=!0,t.composed=!0,t.ctrlKey=!1,t.currentTarget=null,t.defaultPrevented=!1,t.detail=0,t.eventPhase=0,t.fromElement=null,t.width=5,t.height=5,t.isPrimary=!0,t.metaKey=!1,t.movementX=0,t.movementY=1,t.pointerType="touch",t.pressure=1,t.relatedTarget=null,t.returnValue=!0,t.shiftKey=!1,t.sourceCapabilities=null,t.tangentialPressure=0,t.tiltX=0,t.tiltY=0,t.timeStamp=39505,t.toElement=null,t.twist=0,t.which=0,t.code="";const r=e.target.offsetLeft,n=e.target.offsetTop;var s=e.changedTouches[0];return this.touch2touch(r,n,s,t,c)}static fix2(e){const t=new l(e.type);t.isTrusted=!0,t.altKey=!1,t.altitudeAngle=1.5707963267948966,t.azimuthAngle=0,t.bubbles=!0,t.button=["touchstart","touchend"].includes(e.type)?0:-1,t.buttons=["touchstart","touchend"].includes(e.type)?0:1,t.cancelBubble=!1,t.cancelable=!0,t.composed=!0,t.ctrlKey=!1,t.currentTarget=null,t.defaultPrevented=!1,t.detail=0,t.eventPhase=0,t.fromElement=null,t.height=30.66666603088379,t.isPrimary=!0,t.metaKey=!1,t.movementX=0,t.movementY=1,t.pointerType="touch",t.pressure=1,t.relatedTarget=null,t.returnValue=!0,t.shiftKey=!1,t.sourceCapabilities=null,t.tangentialPressure=0,t.tiltX=0,t.tiltY=0,t.timeStamp=39505,t.toElement=null,t.twist=0,t.which=0,t.width=30.66666603088379,t.code="";const r=e.target.offsetLeft,n=e.target.offsetTop;return t.touches=e.touches.map((e=>this.touch2touch(r,n,e,{}))),t.changedTouches=e.changedTouches.map((e=>this.touch2touch(r,n,e,{}))),t}static touch2touch(e,t,r,n,s=1){return n.pointerId=null!=r.identifier?r.identifier:2,n.identifier=r.identifier,"devtools"==o?(n.pageX=r.x*s,n.pageY=r.y*s,n.clientX=(r.x-e)*s,n.clientY=(r.y-t)*s,n.layerX=n.clientX,n.layerY=n.clientY,n.x=n.clientX,n.y=n.clientY,n.offsetX=n.clientX,n.offsetY=n.clientY,n.deltaX=n.offsetX,n.deltaY=n.offsetY):(n.pageX=r.pageX*s,n.pageY=r.pageY*s,n.clientX=r.clientX*s,n.clientY=r.clientY*s,n.x=r.x*s,n.y=r.y*s,n.deltaX=r.deltaX*s,n.deltaY=r.deltaY*s,n.layerX=n.clientX,n.layerY=n.clientY,n.deltaX=n.offsetX,n.deltaY=n.offsetY),n}constructor(e,t){this.type=e,this.options=t}preventDefault(){}}class u{constructor(){this._all_event_handlers={}}addEventListener(e,t){this._all_event_handlers[e]||(this._all_event_handlers[e]=[]),this._all_event_handlers[e].push(t)}removeEventListener(e,t){this._all_event_handlers[e]=i.remove(this._all_event_handlers[e],t)}createEvent(e){return new l(e)}dispatchEvent(e){setTimeout((()=>{var t=e.type;const r={touchcancel:["mouseCancel","pointercancel"],touchstart:["mouseDown","pointerdown"],touchmove:["mouseMove","pointermove"],touchend:["mouseUp","pointerup","click"]};var n=this._all_event_handlers[t]||[];if(n.length<=0&&Object.keys(r).includes(t)){const e=r[t];for(const t of e){const e=this._all_event_handlers[t];e&&(n=n.concat(e))}}for(var s of n)s.call(this,e)}),0)}}class h extends u{constructor(){super()}}class m extends h{constructor(){super()}}class d{constructor(e){this.classes=[]}add(e){}remove(){}toggle(){}}class p extends m{constructor(e){super(),this.mini_element=e,this.style=new s,this.classList=new d,this._children=[],this._childNodes=[],this.textContent=""}get ownerDocument(){var e=new p;return e.documentElement=new p,e}get parentElement(){return new p}set id(e){this._id=e,this.mini_key=e}get id(){return this._id}get children(){return this._children}get childNodes(){return this._childNodes}set innerHTML(e){if("string"!=typeof e)return;e=(e=(e=e.replaceAll("<br/>","\n")).replaceAll("<br>","\n")).replaceAll("&nbsp;"," ");const t={};t[`${this.mini_key}_innerHTML`]=e,n.current&&n.current.setData(t)}get innerHTML(){return this._innerHTML}prepend(){}append(){}appendChild(){}removeChild(){}remove(){}insertBefore(){}setAttribute(){}toggleAttribute(){}click(){}get clientLeft(){return 0}get clientTop(){return 0}getBoundingClientRect(){if(this.mini_element){const e=wx.getSystemInfoSync();return{left:0,top:0,width:this.mini_element.width/e.pixelRatio,height:this.mini_element.height/e.pixelRatio}}return{left:0,top:0,width:0,height:0}}play(){}setPointerCapture(){}releasePointerCapture(){}get clientWidth(){return this.mini_element?this.mini_element.width:0}get clientHeight(){return this.mini_element?this.mini_element.height:0}get pageXOffset(){return 0}get pageYOffset(){return 0}}class g extends p{constructor(e){super(),this.isOffscreen=e&&e.isOffscreenCanvas;var t=e;!t&&n.current&&n.current.$vm&&(t=n.current.$vm.canvas),!t&&n.getApp()&&(t=n.getApp().canvas),t&&t.mini_element&&(t=t.mini_element),this.image=t.createImage(),this.image.onload=()=>{this.onload&&this.onload.call(this),this._all_event_handlers.load&&this._all_event_handlers.load.forEach((e=>{e.call(this)}))},this.image.onerror=e=>{this.onerror&&this.onerror.call(this,e),this._all_event_handlers.error&&this._all_event_handlers.error.forEach((t=>{t.call(this,e)}))}}get width(){return this.image.width}get height(){return this.image.height}get data(){return this.image.data}get complete(){return this.image.complete}set crossOrigin(e){this._crossOrigin=e}get crossOrigin(){return this._crossOrigin}set src(e){const t=n.getApp().onekit_debug;if(t&&(e.startsWith("data:")?console[t]("[HTMLImageElement]","blob",e):console[t]("[HTMLImageElement]",e)),e.startsWith("data:"))return this._src=e,void(this.image.src=e);if(e.startsWith("blob:"))try{this._src=e;var s=n.current;s||(s=n.getApp());const t=s.DataURL[e].array[0],i="data:image/png;base64,"+r.arrayBufferToBase64(t);this.image.src=i}catch(e){console.error(e)}else e.startsWith("./")&&(e=e.substring(2)),e.startsWith("blob:")||e.startsWith("data:")||e.startsWith("http://")||e.startsWith("https://")||(e=(n.getApp().onekit_path||"")+e),this.image.src=e}get src(){return this._src}}function f(t,n){return new Promise(((n,s)=>{try{const s=new g;s.onload=function(){n(s)},t instanceof e&&(t="data:image/png;base64,"+r.arrayBufferToBase64(t.array[0])),s.src=t}catch(e){console.error(e),s(e)}}))}class y{constructor(){this.fill="",this["fill-opacity"]="",this["fill-rule"]="",this.opacity="",this.stroke="",this["stroke-opacity"]="",this["stroke-width"]="",this["stroke-linejoin"]="",this["stroke-linecap"]="",this["stroke-miterlimit"]="",this.visibility=""}static parse(e){const t=new y,r=e.split(";");for(const e of r){if(!e)continue;if(!e.includes(":"))continue;const r=e.trim().split(":");t[r[0].trim()]=r[1].trim()}return t}}class b extends p{constructor(e){super(e)}get width(){return this.mini_element.width}set width(e){this.mini_element.width=e}get height(){return this.mini_element.height}set height(e){this.mini_element.height=e}getContext(e,t){return["2d","webgl"].includes(e)?this.mini_element.getContext(e,t):null}toDataURL(e,t){return this.mini_element.toDataURL(e,t)}}function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}class _{static createObjectURL(e){const t=`blob:http://localhost/${w()}`;try{var r=n.current;r||(r=n.getApp()),r.DataURL||(r.DataURL={}),r.DataURL[t]=e}catch(e){console.error(e)}return t}static revokeObjectURL(e){try{var t=n.current;t||(t=n.getApp()),delete t.DataURL[e]}catch(e){console.error(e)}}}class x{constructor(){this.time0=(new Date).getTime()}now(){return(new Date).getTime()-this.time0}}class A{constructor(){this.hash="",this.search="",this.href=""}}function v(e,t){!t&&n.current&&n.current.$vm&&(t=n.current.$vm.canvas),!t&&n.current&&n.current.$vm&&(t=n.current.$vm.canvas),t&&t.mini_element&&(t=t.mini_element);return t.requestAnimationFrame(e)}function N(e,t){try{if(!e)return;if(!t&&n.current&&n.current.$vm&&(t=n.current.$vm.canvas),!t&&n.getApp()&&(t=n.getApp().canvas),!t)return;t&&t.mini_element&&(t=t.mini_element),t.cancelAnimationFrame(e)}catch(e){console.error(e)}}class E extends u{constructor(e){super(),this.isOffscreen=e&&e.isOffscreenCanvas;var t=e;!t&&n.current&&n.current.$vm&&(t=n.current.$vm.canvas),!t&&n.getApp()&&(t=n.getApp().canvas),t&&t.mini_element&&(t=t.mini_element),this.image=t.createImage(),this.image.onload=()=>{this.onload&&this.onload.call(this),this._all_event_handlers.load&&this._all_event_handlers.load.forEach((e=>{e.call(this)}))},this.image.onerror=e=>{this.onerror&&this.onerror.call(this,e),this._all_event_handlers.error&&this._all_event_handlers.error.forEach((t=>{t.call(this,e)}))}}get width(){return this.image.width}get height(){return this.image.height}get data(){return this.image.data}get complete(){return this.image.complete}set crossOrigin(e){this._crossOrigin=e}get crossOrigin(){return this._crossOrigin}set src(e){const t=n.getApp().onekit_debug;if(t&&(e.startsWith("data:")?console[t]("[Image]","blob"):console[t]("[Image]",e)),e.startsWith("data:"))return this._src=e,void(this.image.src=e);if(e.startsWith("blob:"))try{this._src=e;var s=n.current;s||(s=n.getApp());const t=s.DataURL[e].array[0],i="data:image/png;base64,"+r.arrayBufferToBase64(t);this.image.src=i}catch(e){console.error(e)}else e.startsWith("./")&&(e=e.substring(2)),e.startsWith("blob:")||e.startsWith("data:")||e.startsWith("mini:")||e.startsWith("http://")||e.startsWith("https://")||(e=(n.getApp().onekit_path||"")+e),this.image.src=e}get src(){return this._src}}class T{constructor(e){this.image=e}get width(){return this.image.width}get height(){return this.image.height}get data(){return this.image.data}}function S(e){if(null==e)return null;if(e instanceof ArrayBuffer)return{t:"ArrayBuffer",v:e};if(e instanceof Int8Array)return{t:"Int8Array",v:e.buffer};if(e instanceof Uint8Array)return{t:"Uint8Array",v:e.buffer};if(e instanceof Uint8ClampedArray)return{t:"Uint8ClampedArray",v:e.buffer};if(e instanceof Int16Array)return{t:"Int16Array",v:e.buffer};if(e instanceof Uint16Array)return{t:"Uint16Array",v:e.buffer};if(e instanceof Int32Array)return{t:"Int32Array",v:e.buffer};if(e instanceof Uint32Array)return{t:"Uint32Array",v:e.buffer};if(e instanceof Uint32Array)return{t:"Uint32Array",v:e.buffer};if(e instanceof Float32Array)return{t:"Float32Array",v:e.buffer};if(e instanceof Float64Array)return{t:"Float64Array",v:e.buffer};if(e instanceof Array)return{t:"Array",v:e.map((e=>S(e)))};if("boolean"==typeof e)return{t:"Boolean",v:e};if("number"==typeof e)return{t:"Number",v:e};if("string"==typeof e)return{t:"String",v:e};const t={};for(const r of Object.keys(e))t[r]=S(e[r]);return{t:"Dict",v:t}}function I(e){if(null==e)return null;const t=e.v;switch(e.t){case"ArrayBuffer":case"Boolean":case"String":case"Number":return t;case"Int8Array":return new Int8Array(t);case"Uint8Array":return new Uint8Array(t);case"Uint8ClampedArray":return new Uint8ClampedArray(t);case"Int16Array":return new Int16Array(t);case"Uint16Array":return new Uint16Array(t);case"Int32Array":return new Int32Array(t);case"Uint32Array":return new Uint32Array(t);case"Float32Array":return new Float32Array(t);case"Float64Array":return new Float64Array(t);case"Array":return t.map((e=>I(e)));case"Dict":const r={};for(const e of Object.keys(t))r[e]=I(t[e]);return r;default:throw new Error(e.t)}}class D extends u{static self_onmessage(e){return{data:I(e)}}static self_postMessage(e){return worker.postMessage(S(e))}constructor(e){super();var t=n.current;t||(t=n.getApp()),t.worker=this;const r=n.getApp().onekit_debug;r&&console[r]("[Worker]",e);const s=()=>{const t=wx.createWorker("workers/"+e,{useExperimentalWorker:!0});t.onMessage((e=>{this.onmessage&&this.onmessage({data:I(e)}),this._all_event_handlers.message&&this._all_event_handlers.message.forEach((e=>{e.apply(this)}))})),t.onProcessKilled((()=>{s()})),this._worker=t};s()}postMessage(e){const t=S(e);this._worker.postMessage(t)}terminate(){this._worker.terminate()}}class C{constructor(e){this.mini_gain=e}connect(){}}class R{constructor(e){this.mini_source=e}get playbackRate(){return this.mini_source.playbackRate}set buffer(e){this.mini_source.buffer=e}set loop(e){this.mini_source.loop=e}set loopStart(e){this.mini_source.loopStart=e}set loopEnd(e){this.mini_source.loopEnd=e}set onended(e){this.mini_source.onended=e}start(e,t,r){this.mini_source.start(e,t,r)}stop(){this.mini_source.stop()}connect(e){}}class O{constructor(e){this.mini_panner=e}set panningModel(e){this.mini_panner.panningModel=e}connect(e){}}class U{constructor(){}get positionX(){return 0}get positionY(){return 0}setPosition(){}setOrientation(){}}class M{constructor(){this.mini_context=wx.createWebAudioContext()}createBufferSource(){return new R(this.mini_context.createBufferSource())}createPanner(){return new O(this.mini_context.createPanner())}get listener(){return new U}get currentTime(){return this.mini_context.currentTime}get destination(){return this.mini_context.destination}createGain(){return new C(this.mini_context.createGain())}createMediaElementSource(e){}createMediaStreamSource(e){}decodeAudioData(e,t,r){this.mini_context.decodeAudioData(e,(e=>{t(e)}),(e=>{r(e)}))}}class k{constructor(e,t,r){this.array=e,this.width=t,this.height=r}}class W{decode(e){let t="";for(let r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(e){return t}}}class B extends p{get TextDecoder(){return W}get Image(){return E}get Event(){return l}get ImageData(){return k}get btoa(){return t}get Int8Array(){return Int8Array}get Uint8Array(){return Uint8Array}get Uint8ClampedArray(){return Uint8ClampedArray}get Int16Array(){return Int16Array}get Uint16Array(){return Uint16Array}get Int32Array(){return Int32Array}get Uint32Array(){return Uint32Array}get Float32Array(){return Float32Array}get Float64Array(){return Float64Array}get BigInt64Array(){return BigInt64Array}get BigUint64Array(){return BigUint64Array}_getSystemInfoSync(){this.onekit_systemInfo||(this.onekit_systemInfo=wx.getSystemInfoSync())}constructor(){super(),this.URL=_,this.AudioContext=M,this.performance=new x,this.setTimeout=setTimeout,this.clearTimeout=clearTimeout,this.setInterval=setInterval,this.clearInterval=clearInterval}get HTMLImageElement(){return g}get HTMLCanvasElement(){return b}get ImageBitmap(){return T}get devicePixelRatio(){return this._getSystemInfoSync(),this.onekit_systemInfo.pixelRatio}get innerWidth(){return this._getSystemInfoSync(),this.onekit_systemInfo.windowWidth}get innerHeight(){return this._getSystemInfoSync(),this.onekit_systemInfo.windowHeight}get Math(){return this.Math}get location(){return new A}get requestAnimationFrame(){return v}get cancelAnimationFrame(){return N}get createImageBitmap(){return f}get localStorage(){return localStorage}postMessage(e){return D.self_postMessage(e)}onmessage(e){return D.self_onmessage(e)}}const P=new B;class L extends p{}class q extends p{}class F{constructor(e,t={},r){r||(this.body=e,this.status=t.status,this.statusText=t.statusText,this.headers=t.headers),this.request="string"==typeof r?{url:r}:r,this.status=200}_run(e,t="text"){const s=n.getApp().onekit_debug;s&&console[s]("[fetch]",this.request.url,e,t);var i=this.request.url;return i.endsWith(".js")?new Promise((e=>{e(i)})):i.startsWith("mini:")?new Promise(((e,n)=>{try{if("text"==t){const t="mini:";e(i.substring(t.length))}else{const t="base64,",n=i.substring(i.indexOf(t)+t.length);e(r.base64ToArrayBuffer(n))}}catch(e){console.error(e),n(e)}})):i.startsWith("data:")?new Promise(((e,t)=>{try{const t="base64,",n=i.substring(i.indexOf(t)+t.length);e(r.base64ToArrayBuffer(n))}catch(e){console.error(e),t(e)}})):i.startsWith("blob:")?new Promise(((e,t)=>{try{var r=n.current;r||(r=n.getApp());e(r.DataURL[i].array[0])}catch(e){console.error(e),t(e)}})):(i.startsWith("./")&&(i=i.substring(2)),i.startsWith("blob:")||i.startsWith("data:")||i.startsWith("mini:")||i.startsWith("http://")||i.startsWith("https://")||(i=(n.getApp().onekit_path||"")+i),new Promise(((r,s)=>{n.wx_request({url:i,headers:((this.request.options||{}).headers||{}).data||{},responseType:e,dataType:t,success:e=>{r(e.data)},fail:e=>{console.error("[fetch.fail]",this.request.url,e),s(null)}})})))}arrayBuffer(){return this._run("arraybuffer","arraybuffer")}blob(){return new Promise(((t,r)=>{this._run("arraybuffer","blob").then((r=>{t(new e([r]))})).catch((e=>{console.error(e),r(e.message)}))}))}text(){return this._run("text")}json(){return this._run("text","json")}}var X=new class{constructor(){const e=wx.getSystemInfoSync();this.userAgent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36",this.platform=e.platform,this.mediaDevices={getUserMedia:()=>new Promise((e=>{e()}))}}};var $={compile:WXWebAssembly.compile,compileStreaming:WXWebAssembly.compileStreaming,instantiate:WXWebAssembly.instantiate,instantiateStreaming:WXWebAssembly.compileStreaming,validate:WXWebAssembly.validate||function(){return!0},Module:WXWebAssembly.Module,Global:WXWebAssembly.Global,Instance:WXWebAssembly.Instance,Memory:WXWebAssembly.Memory,Table:WXWebAssembly.Table,Tag:WXWebAssembly.Tag,CompileError:Error,LinkError:Error,RuntimeError:Error,Exception:Error};var Y={entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}};const H=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=new RegExp("[\\-\\.0-9"+H.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),z=new RegExp("^"+H.source+j.source+"*(?::"+H.source+j.source+"*)?$"),V=0,K=1,G=2,Q=3,Z=4,J=5,ee=6,te=7;function re(){}function ne(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function se(e,t,r,n,s,i){let a;let o=++t,c=V;for(;;){let u=e.charAt(o);switch(u){case"=":if(c===K)a=e.slice(t,o),c=Q;else{if(c!==G)throw new Error("attribute equal must after attrName");c=Q}break;case"'":case'"':if(c===Q||c===K){if(c===K&&(i.warning('attribute value must after "="'),a=e.slice(t,o)),t=o+1,o=e.indexOf(u,t),!(o>0))throw new Error("attribute value no end '"+u+"' match");l=e.slice(t,o).replace(/&#?\w+;/g,s),r.add(a,l,t-1),c=J}else{if(c!=Z)throw new Error('attribute value must after "="');l=e.slice(t,o).replace(/&#?\w+;/g,s),r.add(a,l,t),i.warning('attribute "'+a+'" missed start quot('+u+")!!"),t=o+1,c=J}break;case"/":switch(c){case V:r.setTagName(e.slice(t,o));case J:case ee:case te:c=te,r.closed=!0;case Z:case K:case G:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),c==V&&r.setTagName(e.slice(t,o)),o;case">":switch(c){case V:r.setTagName(e.slice(t,o));case J:case ee:case te:break;case Z:case K:"/"===(l=e.slice(t,o)).slice(-1)&&(r.closed=!0,l=l.slice(0,-1));case G:c===G&&(l=a),c==Z?(i.warning('attribute "'+l+'" missed quot(")!!'),r.add(a,l.replace(/&#?\w+;/g,s),t)):("http://www.w3.org/1999/xhtml"===n[""]&&l.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),r.add(l,l,t));break;case Q:throw new Error("attribute value missed!!")}return o;case"":u=" ";default:if(u<=" ")switch(c){case V:r.setTagName(e.slice(t,o)),c=ee;break;case K:a=e.slice(t,o),c=G;break;case Z:var l=e.slice(t,o).replace(/&#?\w+;/g,s);i.warning('attribute "'+l+'" missed quot(")!!'),r.add(a,l,t);case J:c=ee}else switch(c){case G:r.tagName,"http://www.w3.org/1999/xhtml"===n[""]&&a.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),r.add(a,a,t),t=o,c=K;break;case J:i.warning('attribute space is required"'+a+'"!!');case ee:c=K,t=o;break;case Q:c=Z,t=o;break;case te:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function ie(e,t,r){const n=e.tagName;let s=null;for(var i=e.length;i--;){var a=e[i];const n=a.qName,h=a.value;if((u=n.indexOf(":"))>0)var o=a.prefix=n.slice(0,u),c=n.slice(u+1),l="xmlns"===o&&c;else c=n,o=null,l="xmlns"===n&&"";a.localName=c,!1!==l&&(null==s&&(s={},ce(r,r={})),r[l]=s[l]=h,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(l,h))}for(i=e.length;i--;){(o=(a=e[i]).prefix)&&("xml"===o&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==o&&(a.uri=r[o||""]))}var u;(u=n.indexOf(":"))>0?(o=e.prefix=n.slice(0,u),c=e.localName=n.slice(u+1)):(o=null,c=e.localName=n);const h=e.uri=r[o||""];if(t.startElement(h,c,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=s,!0;if(t.endElement(h,c,n),s)for(o in s)t.endPrefixMapping(o)}function ae(e,t,r,n,s){if(/^(?:script|textarea)$/i.test(r)){const i=e.indexOf("</"+r+">",t);let a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(r)?(s.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,n),s.characters(a,0,a.length),i)}return t+1}function oe(e,t,r,n){let s=n[r];return null==s&&(s=e.lastIndexOf("</"+r+">"),s<t&&(s=e.lastIndexOf("</"+r)),n[r]=s),s<t}function ce(e,t){for(const r in e)t[r]=e[r]}function le(e,t,r,n){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(s=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,s-t-4),s+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var s=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,s-t-9),r.endCDATA(),s+3}var i=function(e,t){let r;const n=[],s=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;s.lastIndex=t,s.exec(e);for(;r=s.exec(e);)if(n.push(r),r[1])return n}(e,t),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){const e=i[1][0],t=a>3&&/^public$/i.test(i[2][0])&&i[3][0],n=a>4&&i[4][0],s=i[a-1];return r.startDTD(e,t&&t.replace(/^(['"])(.*?)\1$/,"$2"),n&&n.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),s.index+s[0].length}return-1}function ue(e,t,r){const n=e.indexOf("?>",t);if(n){const s=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return s?(s[0].length,r.processingInstruction(s[1],s[2]),n+2):-1}return-1}function he(e){}function me(e,t){for(const r in e)t[r]=e[r]}function de(e,t){let r=e.prototype;if(!(r instanceof t)){function n(){}n.prototype=t.prototype,me(r,n=new n),e.prototype=r=n}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}re.prototype={parse(e,t,r){const n=this.domBuilder;n.startDocument(),ce(t,t={}),function(e,t,r,n,s){function i(e){if(e>65535){const t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function a(e){const t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?i(parseInt(t.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function o(t){if(t>g){const r=e.substring(g,t).replace(/&#?\w+;/g,a);m&&c(g),n.characters(r,0,t-g),g=t}}function c(t,r){for(;t>=u&&(r=h.exec(e));)l=r.index,u=l+r[0].length,m.lineNumber++;m.columnNumber=t-l+1}var l=0,u=0,h=/.*(?:\r\n?|\n)|.*$/g,m=n.locator;const d=[{currentNSMap:t}],p={};var g=0;for(;;){try{var f=e.indexOf("<",g);if(f<0){if(!e.substr(g).match(/^\s*$/)){const t=n.doc,r=t.createTextNode(e.substr(g));t.appendChild(r),n.currentElement=r}return}switch(f>g&&o(f),e.charAt(f+1)){case"/":var y=e.indexOf(">",f+3),b=e.substring(f+2,y),w=d.pop();y<0?(b=e.substring(f+2).replace(/[\s<].*/,""),s.error("end tag name: "+b+" is not complete:"+w.tagName),y=f+1+b.length):b.match(/\s</)&&(b=b.replace(/[\s<].*/,""),s.error("end tag name: "+b+" maybe not complete"),y=f+1+b.length);var _=w.localNSMap,x=w.tagName==b;if(x||w.tagName&&w.tagName.toLowerCase()==b.toLowerCase()){if(n.endElement(w.uri,w.localName,b),_)for(const e in _)n.endPrefixMapping(e);x||s.fatalError("end tag name: "+b+" is not match the current start tagName:"+w.tagName)}else d.push(w);y++;break;case"?":m&&c(f),y=ue(e,f,n);break;case"!":m&&c(f),y=le(e,f,n,s);break;default:m&&c(f);var A=new he,v=d[d.length-1].currentNSMap,N=(y=se(e,f,A,v,a,s),A.length);if(!A.closed&&oe(e,y,A.tagName,p)&&(A.closed=!0,r.nbsp||s.warning("unclosed xml attribute")),m&&N){const e=ne(m,{});for(let e=0;e<N;e++){const t=A[e];c(t.offset),t.locator=ne(m,{})}n.locator=e,ie(A,n,v)&&d.push(A),n.locator=m}else ie(A,n,v)&&d.push(A);"http://www.w3.org/1999/xhtml"!==A.uri||A.closed?y++:y=ae(e,y,A.tagName,a,n)}}catch(e){s.error("element parse error: "+e),y=-1}y>g?g=y:o(Math.max(f,g)+1)}}(e,t,r,n,this.errorHandler),n.endDocument()}},he.prototype={setTagName(e){if(!z.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add(e,t,r){if(!z.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName(e){return this[e].localName},getLocator(e){return this[e].locator},getQName(e){return this[e].qName},getURI(e){return this[e].uri},getValue(e){return this[e].value}};const pe="http://www.w3.org/1999/xhtml",ge={},fe=ge.ELEMENT_NODE=1,ye=ge.ATTRIBUTE_NODE=2,be=ge.TEXT_NODE=3,we=ge.CDATA_SECTION_NODE=4,_e=ge.ENTITY_REFERENCE_NODE=5,xe=ge.ENTITY_NODE=6,Ae=ge.PROCESSING_INSTRUCTION_NODE=7,ve=ge.COMMENT_NODE=8,Ne=ge.DOCUMENT_NODE=9,Ee=ge.DOCUMENT_TYPE_NODE=10,Te=ge.DOCUMENT_FRAGMENT_NODE=11,Se=ge.NOTATION_NODE=12,Ie={},De={};Ie.INDEX_SIZE_ERR=(De[1]="Index size error",1),Ie.DOMSTRING_SIZE_ERR=(De[2]="DOMString size error",2);const Ce=Ie.HIERARCHY_REQUEST_ERR=(De[3]="Hierarchy request error",3);Ie.WRONG_DOCUMENT_ERR=(De[4]="Wrong document",4),Ie.INVALID_CHARACTER_ERR=(De[5]="Invalid character",5),Ie.NO_DATA_ALLOWED_ERR=(De[6]="No data allowed",6),Ie.NO_MODIFICATION_ALLOWED_ERR=(De[7]="No modification allowed",7);const Re=Ie.NOT_FOUND_ERR=(De[8]="Not found",8);Ie.NOT_SUPPORTED_ERR=(De[9]="Not supported",9);const Oe=Ie.INUSE_ATTRIBUTE_ERR=(De[10]="Attribute in use",10);function Ue(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,De[e]),this.message=De[e],Error.captureStackTrace&&Error.captureStackTrace(this,Ue);return r.code=e,t&&(this.message=this.message+": "+t),r}function Me(){}function ke(e,t){this._node=e,this._refresh=t,We(this)}function We(e){const t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){const r=e._refresh(e._node);pt(e,"length",r.length),me(r,e),e._inc=t}}function Be(){}function Pe(e,t){let r=e.length;for(;r--;)if(e[r]===t)return r}function Le(e,t,r,n){if(n?t[Pe(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;const t=e.ownerDocument;t&&(n&&je(t,e,n),function(e,t,r){e&&e._inc++;const n=r.namespaceURI;"http://www.w3.org/2000/xmlns/"==n&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(t,e,r))}}function qe(e,t,r){let n=Pe(t,r);if(!(n>=0))throw Ue(Re,new Error(e.tagName+"@"+r));{const s=t.length-1;for(;n<s;)t[n]=t[++n];if(t.length=s,e){const t=e.ownerDocument;t&&(je(t,e,r),r.ownerElement=null)}}}function Fe(e){if(this._features={},e)for(const t in e)this._features=e[t]}function Xe(){}function $e(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function Ye(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(Ye(e,t))return!0}while(e=e.nextSibling)}function He(){}function je(e,t,r,n){e&&e._inc++;"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function ze(e,t,r){if(e&&e._inc){e._inc++;const n=t.childNodes;if(r)n[n.length++]=r;else{let e=t.firstChild,r=0;for(;e;)n[r++]=e,e=e.nextSibling;n.length=r}}}function Ve(e,t){const r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,ze(e.ownerDocument,e),t}function Ke(e,t,r){const n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===Te){var s=t.firstChild;if(null==s)return t;var i=t.lastChild}else s=i=t;const a=r?r.previousSibling:e.lastChild;s.previousSibling=a,i.nextSibling=r,a?a.nextSibling=s:e.firstChild=s,null==r?e.lastChild=i:r.previousSibling=i;do{s.parentNode=e}while(s!==i&&(s=s.nextSibling));return ze(e.ownerDocument||e,e),t.nodeType==Te&&(t.firstChild=t.lastChild=null),t}function Ge(){this._nsMap={}}function Qe(){}function Ze(){}function Je(){}function et(){}function tt(){}function rt(){}function nt(){}function st(){}function it(){}function at(){}function ot(){}function ct(){}function lt(e,t){const r=[],n=9==this.nodeType&&this.documentElement||this;var s=n.prefix;const i=n.namespaceURI;if(i&&null==s&&null==(s=n.lookupPrefix(i)))var a=[{namespace:i,prefix:null}];return ht(this,r,e,t,a),r.join("")}function ut(e,t,r){const n=e.prefix||"",s=e.namespaceURI;if(!n&&!s)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===s||"http://www.w3.org/2000/xmlns/"==s)return!1;let i=r.length;for(;i--;){const e=r[i];if(e.prefix==n)return e.namespace!=s}return!0}function ht(e,t,r,n,s){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case fe:s||(s=[]),s.length;var i=e.attributes,a=i.length,o=e.firstChild,c=e.tagName;r=pe===e.namespaceURI||r,t.push("<",c);for(var l=0;l<a;l++){"xmlns"==(u=i.item(l)).prefix?s.push({prefix:u.localName,namespace:u.value}):"xmlns"==u.nodeName&&s.push({prefix:"",namespace:u.value})}for(l=0;l<a;l++){var u;if(ut(u=i.item(l),0,s)){var h=u.prefix||"",m=u.namespaceURI,d=h?" xmlns:"+h:" xmlns";t.push(d,'="',m,'"'),s.push({prefix:h,namespace:m})}ht(u,t,r,n,s)}if(ut(e,0,s)){h=e.prefix||"",m=e.namespaceURI,d=h?" xmlns:"+h:" xmlns";t.push(d,'="',m,'"'),s.push({prefix:h,namespace:m})}if(o||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push(">"),r&&/^script$/i.test(c))for(;o;)o.data?t.push(o.data):ht(o,t,r,n,s),o=o.nextSibling;else for(;o;)ht(o,t,r,n,s),o=o.nextSibling;t.push("</",c,">")}else t.push("/>");return;case Ne:case Te:for(o=e.firstChild;o;)ht(o,t,r,n,s),o=o.nextSibling;return;case ye:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,$e),'"');case be:return t.push(e.data.replace(/[<&]/g,$e));case we:return t.push("<![CDATA[",e.data,"]]>");case ve:return t.push("\x3c!--",e.data,"--\x3e");case Ee:var p=e.publicId,g=e.systemId;if(t.push("<!DOCTYPE ",e.name),p)t.push(' PUBLIC "',p),g&&"."!=g&&t.push('" "',g),t.push('">');else if(g&&"."!=g)t.push(' SYSTEM "',g,'">');else{const r=e.internalSubset;r&&t.push(" [",r,"]"),t.push(">")}return;case Ae:return t.push("<?",e.target," ",e.data,"?>");case _e:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function mt(e,t,r){let n;switch(t.nodeType){case fe:n=t.cloneNode(!1),n.ownerDocument=e;case Te:break;case ye:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r){let s=t.firstChild;for(;s;)n.appendChild(mt(e,s,r)),s=s.nextSibling}return n}function dt(e,t,r){const n=new t.constructor;for(const e in t){const r=t[e];"object"!=typeof r&&r!=n[e]&&(n[e]=r)}switch(t.childNodes&&(n.childNodes=new Me),n.ownerDocument=e,n.nodeType){case fe:var s=t.attributes,i=n.attributes=new Be,a=s.length;i._ownerElement=n;for(let t=0;t<a;t++)n.setAttributeNode(dt(e,s.item(t),!0));break;case ye:r=!0}if(r){let s=t.firstChild;for(;s;)n.appendChild(dt(e,s,r)),s=s.nextSibling}return n}function pt(e,t,r){e[t]=r}Ie.INVALID_STATE_ERR=(De[11]="Invalid state",11),Ie.SYNTAX_ERR=(De[12]="Syntax error",12),Ie.INVALID_MODIFICATION_ERR=(De[13]="Invalid modification",13),Ie.NAMESPACE_ERR=(De[14]="Invalid namespace",14),Ie.INVALID_ACCESS_ERR=(De[15]="Invalid access",15),Ue.prototype=Error.prototype,me(Ie,Ue),Me.prototype={length:0,item(e){return this[e]||null},toString(e,t){for(var r=[],n=0;n<this.length;n++)ht(this[n],r,e,t);return r.join("")}},ke.prototype.item=function(e){return We(this),this[e]},de(ke,Me),Be.prototype={length:0,item:Me.prototype.item,getNamedItem(e){let t=this.length;for(;t--;){const r=this[t];if(r.nodeName==e)return r}},setNamedItem(e){const t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Ue(Oe);const r=this.getNamedItem(e.nodeName);return Le(this._ownerElement,this,e,r),r},setNamedItemNS(e){const t=e.ownerElement;let r;if(t&&t!=this._ownerElement)throw new Ue(Oe);return r=this.getNamedItemNS(e.namespaceURI,e.localName),Le(this._ownerElement,this,e,r),r},removeNamedItem(e){const t=this.getNamedItem(e);return qe(this._ownerElement,this,t),t},removeNamedItemNS(e,t){const r=this.getNamedItemNS(e,t);return qe(this._ownerElement,this,r),r},getNamedItemNS(e,t){let r=this.length;for(;r--;){const n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},Fe.prototype={hasFeature(e,t){const r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument(e,t,r){const n=new He;if(n.implementation=this,n.childNodes=new Me,n.doctype=r,r&&n.appendChild(r),t){const r=n.createElementNS(e,t);n.appendChild(r)}return n},createDocumentType(e,t,r){const n=new rt;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},Xe.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore(e,t){return Ke(this,e,t)},replaceChild(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild(e){return Ve(this,e)},appendChild(e){return this.insertBefore(e,null)},hasChildNodes(){return null!=this.firstChild},cloneNode(e){return dt(this.ownerDocument||this,this,e)},normalize(){let e=this.firstChild;for(;e;){const t=e.nextSibling;t&&t.nodeType==be&&e.nodeType==be?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes(){return this.attributes.length>0},lookupPrefix(e){let t=this;for(;t;){const r=t._nsMap;if(r)for(const t in r)if(r[t]==e)return t;t=t.nodeType==ye?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI(e){let t=this;for(;t;){const r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==ye?t.ownerDocument:t.parentNode}return null},isDefaultNamespace(e){return null==this.lookupPrefix(e)}},me(ge,Xe),me(ge,Xe.prototype),He.prototype={nodeName:"#document",nodeType:Ne,doctype:null,documentElement:null,_inc:1,insertBefore(e,t){if(e.nodeType==Te){let r=e.firstChild;for(;r;){const e=r.nextSibling;this.insertBefore(r,t),r=e}return e}return null==this.documentElement&&e.nodeType==fe&&(this.documentElement=e),Ke(this,e,t),e.ownerDocument=this,e},removeChild(e){return this.documentElement==e&&(this.documentElement=null),Ve(this,e)},importNode(e,t){return mt(this,e,t)},getElementById(e){let t=null;return Ye(this.documentElement,(function(r){if(r.nodeType==fe&&r.getAttribute("id")==e)return t=r,!0})),t},createElement(e){const t=new Ge;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new Me;return(t.attributes=new Be)._ownerElement=t,t},createDocumentFragment(){const e=new at;return e.ownerDocument=this,e.childNodes=new Me,e},createTextNode(e){const t=new Je;return t.ownerDocument=this,t.appendData(e),t},createComment(e){const t=new et;return t.ownerDocument=this,t.appendData(e),t},createCDATASection(e){const t=new tt;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction(e,t){const r=new ot;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute(e){const t=new Qe;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference(e){const t=new it;return t.ownerDocument=this,t.nodeName=e,t},createElementNS(e,t){const r=new Ge,n=t.split(":"),s=r.attributes=new Be;return r.childNodes=new Me,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,s._ownerElement=r,r},createAttributeNS(e,t){const r=new Qe,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},de(He,Xe),Ge.prototype={nodeType:fe,hasAttribute(e){return null!=this.getAttributeNode(e)},getAttribute(e){const t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode(e){return this.attributes.getNamedItem(e)},setAttribute(e,t){const r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute(e){const t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild(e){return e.nodeType===Te?this.insertBefore(e,null):function(e,t){const r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,ze(e.ownerDocument,e,t),t}(this,e)},setAttributeNode(e){const t=e.value;return"style"==e.name&&(this.style=y.parse(t)),this.attributes[e.name]={value:t,textContent:null==t?"":t.toString()},this.attributes.setNamedItem(e)},setAttributeNodeNS(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS(e,t){const r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS(e,t){const r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS(e,t,r){const n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName(e){return new ke(this,(function(t){const r=[];return Ye(t,(function(n){n===t||n.nodeType!=fe||"*"!==e&&n.tagName!=e&&!n.tagName.endsWith(":"+e)||r.push(n)})),r}))},getElementsByTagNameNS(e,t){return new ke(this,(function(r){const n=[];return Ye(r,(function(s){s===r||s.nodeType!==fe||"*"!==e&&s.namespaceURI!==e||"*"!==t&&s.localName!=t||n.push(s)})),n}))}},He.prototype.getElementsByTagName=Ge.prototype.getElementsByTagName,He.prototype.getElementsByTagNameNS=Ge.prototype.getElementsByTagNameNS,Ge.prototype.querySelectorAll=function(e){const t=e.split(" ");let r=[this];for(const e of t){const t=[];for(const s of r){const r=s.getElementsByTagName(e);for(var n=0;n<r.length;n++)t.push(r[n])}r=t.concat()}return r},Ge.prototype.querySelector=function(e){return this.querySelectorAll(e)[0]},He.prototype.querySelectorAll=Ge.prototype.querySelectorAll,He.prototype.querySelector=Ge.prototype.querySelector,de(Ge,Xe),Qe.prototype.nodeType=ye,de(Qe,Xe),Ze.prototype={data:"",substringData(e,t){return this.data.substring(e,e+t)},appendData(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData(e,t){this.replaceData(e,0,t)},appendChild(e){throw new Error(De[Ce])},deleteData(e,t){this.replaceData(e,t,"")},replaceData(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},de(Ze,Xe),Je.prototype={nodeName:"#text",nodeType:be,splitText(e){let t=this.data;const r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;const n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},de(Je,Ze),et.prototype={nodeName:"#comment",nodeType:ve},de(et,Ze),tt.prototype={nodeName:"#cdata-section",nodeType:we},de(tt,Ze),rt.prototype.nodeType=Ee,de(rt,Xe),nt.prototype.nodeType=Se,de(nt,Xe),st.prototype.nodeType=xe,de(st,Xe),it.prototype.nodeType=_e,de(it,Xe),at.prototype.nodeName="#document-fragment",at.prototype.nodeType=Te,de(at,Xe),ot.prototype.nodeType=Ae,de(ot,Xe),ct.prototype.serializeToString=function(e,t,r){return lt.call(e,t,r)},Xe.prototype.toString=lt;try{if(Object.defineProperty){function St(e){switch(e.nodeType){case fe:case Te:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(St(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(Ge.prototype,"outerHTML",{get(){return(new ct).serializeToString(this)},set(){}}),Object.defineProperty(Ge.prototype,"innerHTML",{get(){var e=(new ct).serializeToString(this);return e=(e=e.substring(e.indexOf(">"))).substring(0,e.lastIndexOf("</"))},set(){}}),Object.defineProperty(Ge.prototype,"firstElementChild",{get(){return this.firstChild}}),Object.defineProperty(Ge.prototype,"nextElementSibling",{get(){return this.nextSibling}}),Object.defineProperty(ke.prototype,"length",{get(){return We(this),this.$$length}}),Object.defineProperty(Xe.prototype,"textContent",{get(){return St(this)},set(e){switch(this.nodeType){case fe:case Te:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),pt=function(e,t,r){e["$$"+t]=r}}}catch(It){}function gt(e){this.options=e||{locator:{}}}function ft(){this.cdata=!1}function yt(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function bt(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function wt(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function _t(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}gt.prototype.parseFromString=function(e,t){const r=this.options,n=new re,s=r.domBuilder||new ft,i=r.errorHandler,a=r.locator,o=r.xmlns||{},c=/\/x?html?$/.test(t),l=c?Y.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&s.setDocumentLocator(a),n.errorHandler=function(e,t,r){if(!e){if(t instanceof ft)return t;e=t}const n={},s=e instanceof Function;function i(t){let i=e[t];!i&&s&&(i=2==e.length?function(r){e(t,r)}:e),n[t]=i&&function(e){i("[xmldom "+t+"]\t"+e+bt(r))}||function(){}}return r=r||{},i("warning"),i("error"),i("fatalError"),n}(i,s,a),n.domBuilder=r.domBuilder||s,c&&(o[""]="http://www.w3.org/1999/xhtml"),o.xml=o.xml||"http://www.w3.org/XML/1998/namespace",e?n.parse(e,o,l):n.errorHandler.error("invalid doc source"),s.doc},ft.prototype={startDocument(){this.doc=(new Fe).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement(e,t,r,n){const s=this.doc,i=s.createElementNS(e,r||t),a=n.length;_t(this,i),this.currentElement=i,this.locator&&yt(this.locator,i);for(let t=0;t<a;t++){e=n.getURI(t);const a=n.getValue(t);r=n.getQName(t);const o=s.createAttributeNS(e,r);this.locator&&yt(n.getLocator(t),o),o.value=o.nodeValue=a,i.setAttributeNode(o)}},endElement(e,t,r){const n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping(e,t){},endPrefixMapping(e){},processingInstruction(e,t){const r=this.doc.createProcessingInstruction(e,t);this.locator&&yt(this.locator,r),_t(this,r)},ignorableWhitespace(e,t,r){},characters(e,t,r){if(e=wt.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&yt(this.locator,n)}},skippedEntity(e){},endDocument(){this.doc.normalize()},setDocumentLocator(e){(this.locator=e)&&(e.lineNumber=0)},comment(e,t,r){e=wt.apply(this,arguments);const n=this.doc.createComment(e);this.locator&&yt(this.locator,n),_t(this,n)},startCDATA(){this.cdata=!0},endCDATA(){this.cdata=!1},startDTD(e,t,r){const n=this.doc.implementation;if(n&&n.createDocumentType){const s=n.createDocumentType(e,t,r);this.locator&&yt(this.locator,s),_t(this,s)}},warning(e){console.warn("[xmldom warning]\t"+e,bt(this.locator))},error(e){console.error("[xmldom error]\t"+e,bt(this.locator))},fatalError(e){throw console.error("[xmldom fatalError]\t"+e,bt(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){ft.prototype[e]=function(){return null}}));var xt={ArrayX:i,GUID:w,Base64:r,Canvas:class{static fix(e,t){return e.mini_element&&(e=e.mini_element),t.mini_element&&(t=t.mini_element),new Promise(((r,n)=>{try{var s=e.createImage();s.onload=function(){var e=new b(t);e.image=s,r(e)},s.onerror=function(e){n(e)},s.src=t.toDataURL()}catch(e){n(e)}}))}static toImage(e,t){return e.mini_element&&(e=e.mini_element),t.mini_element&&(t=t.mini_element),new Promise(((r,n)=>{try{var s=e.createImage();s.onload=function(){r(s)},s.onerror=function(e){n(e)},s.src=t.toDataURL()}catch(e){n(e)}}))}static toBlob(t,n,s,i){const a=t.toDataURL(s,i),o=`data:${s};base64,`,c=r.base64ToArrayBuffer(a.substring(o.length));n(new e([c]))}static putImageData(e,t,r,n,s,i,a,o){const c=t.data,l=t.height,u=t.width,h=(i=i||0)+(o=void 0!==o?o:l),m=(s=s||0)+(a=void 0!==a?a:u);for(let t=i;t<h;t++)for(let i=s;i<m;i++){const s=t*u+i;e.fillStyle=`rgba(${c[4*s+0]}, ${c[4*s+1]}, ${c[4*s+2]}, ${c[4*s+3]/255})`,e.fillRect(i+r,t+n,1,1)}}},String:class{static fromHump(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}static toHump(e){return e.replace(/\-(\w)/g,(function(e,t){return console.log(e),console.log(t),t.toUpperCase()}))}},Page:n};const At=new x,vt=new class extends p{constructor(){super(),this.window=P,this.body=new q,this.pointerLockElement=this.body}get head(){return new L}async createElementAsync(e,t="2d",r){if("canvas"===e)return new Promise((e=>{var n=wx.createSelectorQuery();r&&(n=n.in(r)),n.select(`#canvas_${t}`).fields({node:!0}).exec((t=>{const r=t[0].node;e(new b(r))}))}));throw console.error("createElementAsync",e),new Error(e)}async getElementByIdAsync(e,t="2d",r){return new Promise((t=>{const n=wx.createSelectorQuery();r&&(n=n.in(r)),n.select(`#${e}`).fields({node:!0}).exec((e=>{const r=e[0].node;t(new b(r))}))}))}async getElementsByTagNameAsync(e,t="2d",r){return new Promise((t=>{const n=wx.createSelectorQuery();r&&(n=n.in(r)),n.select(e).fields({node:!0}).exec((e=>{const r=e[0].node;t([new b(r)])}))}))}async getElementsByClassNameAsync(e,t="2d",r){return new Promise((t=>{const n=wx.createSelectorQuery();r&&(n=n.in(r)),n.select(`.${e}`).fields({node:!0}).exec((e=>{const r=e[0].node;t([new b(r)])}))}))}createElement(e,t="2d"){switch(e){case"canvas":return new b(wx.createOffscreenCanvas({type:t}));case"img":return new g;default:return new p}}createElementNS(e,t,r){return this.createElement(t,r)}get documentElement(){return new p}getElementById(){return new p}getElementsByTagName(){return[]}getElementsByClassName(){return[]}querySelector(){return new p}get location(){return new A}querySelectorAll(){return[]}},Nt=new B,Et=Nt,Tt=new A;return{Image:E,TextDecoder:W,AudioContext:M,ImageData:k,Blob:e,btoa:t,createImageBitmap:f,CSSStyleDeclaration:y,performance:At,document:vt,DOMParser:gt,EventTarget:u,Element:m,fetch:function(e){return new Promise((t=>{t(new F(null,{status:200},e))}))},Headers:class{constructor(e){this.data=e}},HTMLCanvasElement:b,HTMLElement:p,HTMLImageElement:g,ImageBitmap:T,location:Tt,navigator:X,Node:h,Event:l,Event0:class{static fix(e){return e.preventDefault=()=>{},e.stopPropagation=()=>{},e}},Request:class{constructor(e,t={}){this.url=e,this.options=t}},requestAnimationFrame:v,cancelAnimationFrame:N,Response:F,self:Et,URL:_,window:Nt,WebAssembly:$,Worker:D,XMLHttpRequest:class extends u{constructor(){super(),this._responseType="text"}open(e,t,r=!0,n,s){this._method=e,this._url=t,this._async=r,this._user=n,this._password=s}async send(e){const t=e=>{this._response=e.data,"text"===this._responseType&&(this._responseText=this._response),this.onload&&this.onload.apply(this),this._all_event_handlers.load&&this._all_event_handlers.load.forEach((e=>{e.apply(this)}))};var r=this._url;if(r.startsWith("mini:")){try{var s;if("text"==this._responseType){const e="mini:";s=r.substring(e.length)}else{const e="base64,",t=r.substring(r.indexOf(e)+e.length);s=Base64.base64ToArrayBuffer(t)}t.call(this,{data:s})}catch(e){console.error(e)}return}if(r.startsWith("data:")){try{const e="base64,";r=r.substring(r.indexOf(e)+e.length);const n=Base64.base64ToArrayBuffer(r);t.call(this,{data:n})}catch(e){console.error(e)}return}if(r.startsWith("blob:")){try{var i=n.current;i||(i=n.getApp());const e=i.DataURL[r].array[0];t.call(this,{data:e})}catch(e){console.error(e)}return}r.startsWith("./")&&(r=r.substring(2)),r.startsWith("blob:")||r.startsWith("data:")||r.startsWith("mini:")||r.startsWith("http://")||r.startsWith("https://")||(r=(n.getApp().onekit_path||"")+r);const a={url:r,dataType:"text",responseType:this._responseType,method:this._method,data:e};if(this._async)a.success=e=>{t.call(this,e)},a.fail=console.error,this._task=n.wx_request(a);else try{const e=await function(e,t){return new Promise(((r,s)=>{t.success=r,t.fail=e=>{console.error("[XMLHttpRequest]",e),s(e)},e(n.wx_request(t))}))}((e=>{this._task=e}),a);t.call(this,e)}catch(e){console.error(e)}}set responseType(e){this._responseType=e}get responseType(){return this._responseType}get status(){return this.response.status}get response(){return this._response}get responseText(){return this._responseText}set onload(e){this._onload=e}get onload(){return this._onload}set onerror(e){this._onerror=e}get onerror(){return this._onerror}},core:xt}}));
